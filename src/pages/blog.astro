---
import Layout from "../layouts/Layout.astro";
const pageTitle = "Blog";
import "../styles/stylesheet.css";
const posts = await Astro.glob("./posts/*.md");
---

<Layout pageTitle={pageTitle}>
    <!-- Aggiungere script per filtrare i post -->
    <script></script>
    <div id="content">
        <section id="blog">
            <section class="main">
                <h2 class="main">Blogs</h2>
                <nav class="blog">
                    <button class="blog"> All </button>
                    <button class="blog"> Misc </button>
                    <button class="blog"> CS </button>
                    <button class="blog"> Math </button>
                    <button class="blog"> Nerdy </button>
                </nav>
                <div id="postsContainer">
                { posts
                  // Sorts posts by date
                  .sort((a, b) => new Date(b.frontmatter.pubDate).getTime() - (new Date(a.frontmatter.pubDate)).getTime())
                  // Maps over each post
                  .map(post =>
                    <div id="misc250524">
                        <article class="blog">
                            <a href={post.url} class="blog">{post.frontmatter.title}</a
                            >
                            <div class="date">Written on {post.frontmatter.pubDate.toString().slice(0, 10)}</div>
                            <div class="entry">
                                <p>
                                    {post.frontmatter.description}
                                </p>
                            </div>
                            <a href={post.url} class="read">read more</a>
                        </article>
                    </div>
                    <!-- COMPUTER SCIENCE POST -->
                    <div id="cs"></div>
                    <!-- MATH POST -->
                    <div id="math"></div>
                    <!-- NERDY POST -->
                    <div id="nerdy"></div>
                )}
                </div>
            </section>
        </section>
        <!-- DOVE ANDRANNO POSTATI I BLOGS -->
    </div>
</Layout>
